---
name: clean-repo
description: Remove stale files and noise from the repository. Use when repo has accumulated old files or before commits to clean up artifacts.
disable-model-invocation: true
---

# Clean Repository

Remove files that add noise and could confuse humans or agents.

## Safe to Remove

These can be regenerated:
- `node_modules/` - regenerated by `bun install`
- `dist/` - regenerated by build
- `.DS_Store` - macOS artifacts
- `*.log` - log files
- `*.tmp` - temporary files

## Commands

```bash
cd /Users/taavi/Documents/Main_Docs/3_Code/26Q1/canvas-labs

# Remove build artifacts (excludes .git)
find . -name "node_modules" -type d -prune -exec rm -rf {} + 2>/dev/null || true
find . -name "dist" -type d -prune -exec rm -rf {} + 2>/dev/null || true

# Remove OS artifacts
find . -name ".DS_Store" -delete

# Remove log files
find . -name "*.log" -delete

# Show what's left (for verification)
find . -type f -not -path "*/.git/*" | wc -l
echo "files remaining (excluding .git)"
```

## Identify Stale Files

```bash
# Files not modified in 30 days (potential stale)
find . -type f -mtime +30 -not -path "*/.git/*" -not -path "*/node_modules/*"

# Large files that might be stale
find . -type f -size +1M -not -path "*/node_modules/*" -not -path "*/.git/*"

# Duplicate or backup files
find . -name "*.bak" -o -name "*~" -o -name "*.orig"
```

## Never Remove

- Source files (`*.ts`, `*.tsx`, `*.js`)
- Configuration (`*.json`, `*.yaml`, `*.md`)
- Documentation in `docs/`
- Git history (`.git/`)
- Skills (`skills/`)
- Labs content (`labs/`)

## Before Commit Checklist

1. Run clean commands above
2. Check `git status` for untracked files
3. Review large files with `git diff --stat`
4. Ensure no secrets in staged files
